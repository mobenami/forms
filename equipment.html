<!DOCTYPE html>
<html lang="he">
    <head>
    <meta charset="UTF-8" />
    <title>×˜×•×¤×¡ ×”×©××œ×ª ×¦×™×•×“</title>
<script src="https://unpkg.com/jquery"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://unpkg.com/survey-jquery@1.9.126/survey.jquery.min.js"></script>
<script src="https://unpkg.com/survey-pdf@1.9.126/survey.pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<link href="https://unpkg.com/survey-core@1.9.126/modern.min.css" type="text/css" rel="stylesheet"/>
<style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: auto; padding: 20px; direction: rtl; }
    #buttons { margin-top: 20px; }
    button { margin-left: 10px; padding: 10px 16px; font-size: 16px; }
</style>
</head>
<body>
    <!-- <h2>×˜×•×¤×¡ ×¨×™×©×•× ×—×™×•×ª</h2> -->
    <div id="surveyContainer"></div>
    <div id="buttons" style="display:none;">
        <!--     <button id="saveToPdfBtn">ğŸ“„ ×©××•×¨ ×œ-PDF</button>
            <button id="emailBtn">ğŸ“§ ×©×œ×— ×‘××™×™×œ</button>
            <button id="whatsappBtn">ğŸ’¬ ×©×œ×— ×‘×•×•××˜×¡××¤</button>
         -->
        <button id="saveImageBtn">ğŸ–¼ï¸ ×©××•×¨ ×›×ª××•× ×”</button>
    </div>
    
    <script>
        Survey.StylesManager.applyTheme("modern");
        const surveyJSON =
        {
            "title": "×˜×•×¤×¡ ×”×©××œ×ª ×¦×™×•×“ 1894",
            "pages": [
              {
                  "showPageTitles": false,
                  "elements": [
                      {
                          "type": "text",
                          "name": "×©× ××œ×",
                          "isRequired": true
                      },
                      {
                          "type": "text",
                          "name": "×˜×œ×¤×•×Ÿ",
                          "inputType": "tel"
                      },
                      // {
                      //   "type": "matrix",
                      //   "name": "question6",
                      //   "titleLocation": "hidden",
                      //   "columns": [
                      //     "×",
                      //     "×‘",
                      //     "×’",
                      //     "×“",
                      //     "×¤×œ×¡×´×"
                      //   ],
                      //   "rows": [
                      //     "×¤×œ×•×’×”"
                      //   ]
                      // },
                      {
                        "type": "dropdown",
                        "name": "question7",
                        "title": "×¤×œ×•×’×”",
                        "choices": [
                                        "×",
                                        "×‘",
                                        "×’",
                                        "×“",
                                        "×¤×œ×¡×´×"
                        ]
                      },
                      {
                          "type": "text",
                          "name": "××¡×¤×¨ ××™×©×™",
                          "inputType": "number"
                      },
                      {
                          "type": "matrixdropdown",
                          "name": "×¦×™×•×“ ×©×”×•×©××œ",
                          "columns": [
                            {
                                "name": "×›××•×ª",
                                "cellType": "text",
                                "placeholder": "0"
                            }
                          ],
                          "rows": [
                            "×©×•×œ×—×Ÿ",
                            "×¡×¤×¡×œ",
                            "××™×˜×”",
                            "××–×¨×•×Ÿ",
                            "×—×•×¤×™×ª",
                            "×˜×¨××•×§×Ÿ",
                            "×’×³×¨×™×§×Ÿ",
                            "×¤×—",
                            "×¨×©×ª ×”×¦×œ×œ×”",
                            "×¢×¨×›×ª ××•×¡×",
                            "×”×œ×× ×™×”",
                            "×¤×˜×™×© 5",
                            "××œ×•× ×§×”",
                            "×‘×–× ×˜ 180",
                            "×‘×–× ×˜ 60"
                          ]
                      }
          
                  ]
              }
            ]
        }
        const survey = new Survey.Model(surveyJSON);
        // fetch("form.json")
        //   .then(res => res.json())
        //   .then(surveyJSON => {
        // const survey = new Survey.Model(surveyJSON);
        $("#surveyContainer").Survey({ model: survey });
    
        // survey.onComplete.add(sender => {
        //   window.surveyData = sender.data;
        //   document.getElementById("buttons").style.display = "block";
    
        //   // × ×¨× ×“×¨ ××—×“×© ××ª ×”×˜×•×¤×¡ ×¢× ×”× ×ª×•× ×™× ×©××•×œ××•
        //   const newSurvey = new Survey.Model(surveyJSON);
        //   newSurvey.data = window.surveyData;
        //   $("#surveyContainer").html(""); // × × ×§×” ××ª ×”××œ×× ×˜
        //   $("#surveyContainer").Survey({ model: newSurvey });
    
    
    
        //   // window.printableSurvey = newSurvey;
    
    
        //           html2canvas(document.getElementById("surveyContainer")).then(canvas => {
        //             const link = document.createElement("a");
        //             link.download = "×˜×•×¤×¡_×¨×™×©×•×.png";
        //             link.href = canvas.toDataURL("image/png");
        //             link.click();
        //           });
    
        // });
    
        survey.onComplete.add(sender => {
            const data = sender.data;
        
            const displaySurvey = new Survey.Model(surveyJSON);
            displaySurvey.data = data;
            displaySurvey.mode = "display"; // ğŸŸ¡ ××¦×‘ ×ª×¦×•×’×” ×‘×œ×‘×“ â€“ ×‘×œ×™ ×›×¤×ª×•×¨ Submit
        
            $("#surveyContainer").html(""); // × × ×§×”
            $("#surveyContainer").Survey({ model: displaySurvey });
        
            // ×©××™×¨×” ×›×ª××•× ×” ××•×˜×•××˜×™×ª
            setTimeout(() => {
                html2canvas(document.getElementById("surveyContainer")).then(canvas => {
                const link = document.createElement("a");
                link.download = "×˜×•×¤×¡_×¨×™×©×•×.png";
                link.href = canvas.toDataURL("image/png");
                link.click();
            });
        }, 500);
    });
    
    
        // survey.onComplete.add(sender => {
        //   window.surveyData = sender.data;
    
        //   // ××¨× ×“×¨×™× ××—×“×© ××ª ×”×¡×§×¨ ×¢× ×”×ª×©×•×‘×•×ª
        //   const newSurvey = new Survey.Model(surveyJSON);
        //   newSurvey.data = window.surveyData;
        //   $("#surveyContainer").html(""); // × × ×§×”
        //   $("#surveyContainer").Survey({ model: newSurvey });
    
        //   // × ××ª×™×Ÿ ×˜×™×¤×” ×›×“×™ ×œ××¤×©×¨ ×œ×¨× ×“×¨ ×œ×”×¡×ª×™×™×
        //   setTimeout(() => {
        //     html2canvas(document.getElementById("surveyContainer")).then(canvas => {
        //       const link = document.createElement("a");
        //       link.download = "×˜×•×¤×¡_×¨×™×©×•×.png";
        //       link.href = canvas.toDataURL("image/png");
        //       link.click();
        //     });
        //   }, 500); // ×—×¦×™ ×©× ×™×” ×–×” ×‘×“"×› ××¡×¤×™×§
        // });
    
        // survey.onComplete.add(sender => {
        //   document.getElementById("buttons").style.display = "block";
        //   window.surveyData = sender.data;
        //   window.surveyJSON = surveyJSON;
        // });
    
        // document.getElementById("saveToPdfBtn").addEventListener("click", () => {
        //   const pdf = new SurveyPDF.SurveyPDF(surveyJSON);  // ×œ× window["SurveyPDF"]
        //   // const pdf = new window["SurveyPDF"].SurveyPDF(surveyJSON);
        //   pdf.data = window.surveyData;
        //   pdf.save("×ª×©×•×‘×•×ª_×”×˜×•×¤×¡.pdf");
        // });
    
        // document.getElementById("emailBtn").addEventListener("click", () => {
        //   const subject = encodeURIComponent("×ª×©×•×‘×•×ª ×œ×˜×•×¤×¡ ×¨×™×©×•× ×—×™×•×ª");
        //   const body = encodeURIComponent(JSON.stringify(window.surveyData, null, 2));
        //   window.location.href = `mailto:?subject=${subject}&body=${body}`;
        // });
    
        document.getElementById("saveImageBtn").addEventListener("click", () => {
            // html2canvas(surveyJSON).then(canvas => {
            html2canvas(document.getElementById("surveyContainer")).then(canvas => {
                const link = document.createElement("a");
                link.download = "×˜×•×¤×¡_×¨×™×©×•×.png";
                link.href = canvas.toDataURL("image/png");
                link.click();
            });
        });
    
    
        // document.getElementById("whatsappBtn").addEventListener("click", () => {
        //           const text = encodeURIComponent("×ª×©×•×‘×•×ª ×œ×˜×•×¤×¡ ×¨×™×©×•× ×—×™×•×ª:%0A" + JSON.stringify(window.surveyData, null, 2));
        //           window.open(`https://wa.me/?text=${text}`, "_blank");
        //         });
    
    
        // });
        // Uncaught ReferenceError: SurveyPDF is not defined
    
        </script>
    </body>
</html>
